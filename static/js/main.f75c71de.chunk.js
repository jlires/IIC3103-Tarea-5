(this.webpackJsonptarea1=this.webpackJsonptarea1||[]).push([[0],{12:function(e,t,a){e.exports=a(28)},17:function(e,t,a){},18:function(e,t,a){},25:function(e,t,a){e.exports=a.p+"static/media/rick.82926b7d.png"},26:function(e,t,a){e.exports=a.p+"static/media/morty.f5fa4799.png"},28:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(8),r=a.n(c),i=(a(17),a(5)),o=a(1),l=a(2),d=a(6),m=a(3),h=a(4),u=(a(18),a(9)),p=a(10),g=a.n(p),f=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"card text-white"},s.a.createElement("div",{className:"card-body"},s.a.createElement("span",{className:"badge badge-primary"},"Episode"),s.a.createElement("h6",{className:"card-subtitle mb-2"}," ",this.props.episode.episode," - ",this.props.episode.name.substring(0,15),this.props.episode.name.length>15?"...":""),s.a.createElement("p",{className:"card-text"},this.props.episode.air_date)))}}]),a}(n.Component),E=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"card text-white"},s.a.createElement("div",{className:"card-body"},s.a.createElement("span",{className:"badge badge-light"},"Character"),s.a.createElement("h6",{className:"card-subtitle mb-2"}," ",this.props.character.name),s.a.createElement("p",{className:"card-text"},this.props.character.status)))}}]),a}(n.Component),v=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"card text-white"},s.a.createElement("div",{className:"card-body"},s.a.createElement("span",{className:"badge badge-warning"},"Location"),s.a.createElement("h6",{className:"card-subtitle mb-2"}," ",this.props.location.name," - ",this.props.location.type)))}}]),a}(n.Component),y="https://integracion-rick-morty-api.herokuapp.com/graphql",N=function(e,t){var a="page: ".concat(t);return e&&(a+=', filter: {name:"'.concat(e,'"}')),fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n          query {\n            episodes(".concat(a,") {\n              info {\n                count\n                pages\n              }\n              results {\n                id\n                name\n                air_date\n                episode\n                characters {\n                  id\n                  name\n                }\n              }\n            }\n          }\n        ")})}).then((function(e){if(200===e.status)return e.json();console.log(e.status)}))},b=function(e,t){var a="page: ".concat(t);return e&&(a+=', filter: {name:"'.concat(e,'"}')),fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        query {\n          characters(".concat(a,") {\n            info {\n              count\n              pages\n            }\n            results {\n              id\n              name\n              status\n              species\n              type\n              gender\n              origin {\n                name\n                id\n              }\n              location {\n                  name\n                  id\n              }\n              image\n              episode {\n                id\n              }\n            }\n          }\n        }\n        ")})}).then((function(e){if(200===e.status)return e.json();console.log(e.status)}))},k=function(e,t){var a="page: ".concat(t);return e&&(a+=', filter: {name:"'.concat(e,'"}')),fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        query {\n          locations(".concat(a,") {\n            info {\n              count\n              pages\n            }\n            results {\n              id\n              name\n              type\n              dimension\n            }\n          }\n        }\n        ")})}).then((function(e){if(200===e.status)return e.json();console.log(e.status)}))},O=function(e){return fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        query {\n          character(id:".concat(e,") {\n            id\n            name\n            status\n            species\n            type\n            gender\n            origin {\n              name\n              id\n            }\n            location {\n                name\n                id\n            }\n            image\n            episode {\n              id\n              name\n            }\n          }\n        }\n        ")})}).then((function(e){if(200===e.status)return e.json();console.log(e.status)}))},j=function(e){return fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        query {\n          episode(id:".concat(e,") {\n            id\n            name\n            air_date\n            characters {\n              id\n              name\n            }\n          }\n        }\n        ")})}).then((function(e){if(200===e.status)return e.json();console.log(e.status)}))},C=function(e){return fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n        query {\n          location(id:".concat(e,") {\n            id\n            name\n            type\n            dimension\n            residents {\n              id\n              name\n            }\n          }\n        }\n        ")})}).then((function(e){if(200===e.status)return e.json();console.log(e.status)}))},P=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={id:null,name:"",air_date:"",characters:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;j(this.props.data.id).then((function(t){e.setState(t.data.episode)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;e!==this.props&&j(this.props.data.id).then((function(e){a.setState(e.data.episode)}))}},{key:"render",value:function(){var e,t=this;return e=this.props.previous?s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-1"},s.a.createElement("button",{className:"btn",onClick:function(){t.props.goPrevious(t.props.currentPages)}},s.a.createElement("i",{className:"fa fa-arrow-left"}))),s.a.createElement("div",{className:"col-sm-9 col-sm-offset-1"},s.a.createElement("h3",null,this.state.name))):s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("h3",null,this.state.name))),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e),s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title text-muted"},this.state.episode),s.a.createElement("p",{className:"card-text"},this.state.air_date),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Characters:")),s.a.createElement("ul",null,this.state.characters.map((function(e){return s.a.createElement("li",{className:"text-link",onClick:function(){t.props.addPage("character",e,t.props.currentPages)}},e.name)})))))}}]),a}(n.Component),S=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={id:null,name:"",status:"",species:"",type:"",gender:"",origin:{name:"",id:null},location:{name:"",id:null},image:"",episode:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;O(this.props.data.id).then((function(t){e.setState(t.data.character)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;e!==this.props&&O(this.props.data.id).then((function(e){a.setState(e.data.character)}))}},{key:"render",value:function(){var e,t=this;return e=this.props.previous?s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-1"},s.a.createElement("button",{className:"btn",onClick:function(){t.props.goPrevious(t.props.currentPages)}},s.a.createElement("i",{className:"fa fa-arrow-left"}))),s.a.createElement("div",{className:"col-sm-9 col-sm-offset-1"},s.a.createElement("h3",null,this.state.name))):s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("h3",null,this.state.name))),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-6"},s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Status:")," ",this.state.status),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Species:")," ",this.state.species),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Type:")," ",this.state.type),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Gender:")," ",this.state.gender),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Origin: "),this.state.origin.id?s.a.createElement("strong",{className:"text-link",onClick:function(){t.props.addPage("location",t.state.origin,t.props.currentPages)}},this.state.origin.name):s.a.createElement("strong",{className:""},this.state.origin.name)),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Location: "),this.state.location.id?s.a.createElement("strong",{className:"text-link",onClick:function(){t.props.addPage("location",t.state.location,t.props.currentPages)}},this.state.location.name):s.a.createElement("strong",{className:""},this.state.origin.name))),(this.state.location.id,s.a.createElement("div",{className:"col-sm-6"},s.a.createElement("img",{src:this.state.image,alt:this.state.name})))),s.a.createElement("br",null),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Episodes:")),s.a.createElement("ul",null,this.state.episode.map((function(e){return s.a.createElement("li",{className:"text-link",onClick:function(){t.props.addPage("episode",e,t.props.currentPages)}},e.episode," - ",e.name)})))))}}]),a}(n.Component),x=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={id:null,name:"",type:"",dimension:"",air_date:"",residents:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;C(this.props.data.id).then((function(t){e.setState(t.data.location)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;e!==this.props&&C(this.props.data.id).then((function(e){a.setState(e.data.location)}))}},{key:"render",value:function(){var e,t=this;return e=this.props.previous?s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-1"},s.a.createElement("button",{className:"btn",onClick:function(){t.props.goPrevious(t.props.currentPages)}},s.a.createElement("i",{className:"fa fa-arrow-left"}))),s.a.createElement("div",{className:"col-sm-9 col-sm-offset-1"},s.a.createElement("h3",null,this.state.name))):s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("h3",null,this.state.name))),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},e),s.a.createElement("div",{className:"card-body"},s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Type:")," ",this.state.type),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Dimension:")," ",this.state.dimension),s.a.createElement("p",{className:"card-text"},s.a.createElement("strong",null,"Residents:")),s.a.createElement("ul",null,this.state.residents.map((function(e){return s.a.createElement("li",{className:"text-link",onClick:function(){t.props.addPage("character",e,t.props.currentPages)}},e.name)})))))}}]),a}(n.Component),_=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={searchValue:"",pagination:1,maxPageLocations:1,maxPageCharacters:1,maxPageEpisodes:1,loadingCharacters:!1,loadingLocations:!1,loadingEpisodes:!1,data_locations:[],data_characters:[],data_episodes:[],pages:[],checkedFilters:new Map([["check-1-episode",!0],["check-2-character",!1],["check-3-location",!1]])},a.handleOnChange=function(e){a.setState({pagination:1,data:[]}),a.setState({searchValue:e.target.value},(function(){a.searchAll()}))},a.handleFilterChange=function(e){var t=e.target.name,n=e.target.checked;a.setState({checkedFilters:a.state.checkedFilters.set(t,n)})},a.addPage=function(e,t,n){a.setState({pages:[].concat(Object(i.a)(n),[{type:e,data:t}])})},a.popPage=function(e){var t=e;t.pop(),a.setState({pages:t})},a.handleOnChange=a.handleOnChange.bind(Object(d.a)(a)),a.handleFilterChange=a.handleFilterChange.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.searchAll(),window.addEventListener("scroll",Object(u.debounce)((function(){console.log("scrolling stopped"),e.setState({pagination:e.state.pagination+1}),console.log(e.state),e.updateAll()}),1e3))}},{key:"searchAll",value:function(){var e=this;N(this.state.searchValue,1).then((function(t){t=t.data.episodes,e.setState({maxPageEpisodes:t.info.pages,data_episodes:t.results.map((function(e){return{type:"episode",data:e}}))})})).catch((function(t){e.setState({data_episodes:[]})})),b(this.state.searchValue,1).then((function(t){t=t.data.characters,e.setState({maxPageCharacters:t.info.pages,data_characters:t.results.map((function(e){return{type:"character",data:e}}))})})).catch((function(t){e.setState({data_characters:[]})})),k(this.state.searchValue,1).then((function(t){t=t.data.locations,e.setState({maxPageLocations:t.info.pages,data_locations:t.results.map((function(e){return{type:"location",data:e}}))})})).catch((function(t){e.setState({data_locations:[]})}))}},{key:"updateAll",value:function(){var e=this;this.state.maxPageEpisodes+1>this.state.pagination&&(this.setState({loadingEpisodes:!0}),N(this.state.searchValue,this.state.pagination).then((function(t){t=t.data.episodes,e.setState({data_episodes:[].concat(Object(i.a)(e.state.data_episodes),Object(i.a)(t.results.map((function(e){return{type:"episode",data:e}})))),loadingEpisodes:!1})})).catch((function(t){e.setState({loadingEpisodes:!1,data_episodes:e.state.data_episodes})}))),this.state.maxPageCharacters+1>this.state.pagination&&(this.setState({loadingCharacters:!0}),b(this.state.searchValue,this.state.pagination).then((function(t){t=t.data.characters,e.setState({data_characters:[].concat(Object(i.a)(e.state.data_characters),Object(i.a)(t.results.map((function(e){return{type:"character",data:e}})))),loadingCharacters:!1})})).catch((function(t){e.setState({loadingCharacters:!1,data_characters:e.state.data_characters})}))),this.state.maxPageLocations+1>this.state.pagination&&(this.setState({loadingLocations:!0}),k(this.state.searchValue,this.state.pagination).then((function(t){t=t.data.locations,e.setState({data_locations:[].concat(Object(i.a)(e.state.data_locations),Object(i.a)(t.results.map((function(e){return{type:"location",data:e}})))),loadingLocations:!1})})).catch((function(t){e.setState({loadingLocations:!1,data_locations:e.state.data_locations})})))}},{key:"renderDetailPages",value:function(){if(this.state.pages.length>0){var e=this.state.pages[this.state.pages.length-1];if("episode"===e.type)return s.a.createElement(P,{data:e.data,addPage:this.addPage,currentPages:this.state.pages,previous:this.state.pages.length>1,goPrevious:this.popPage});if("character"===e.type)return s.a.createElement(S,{data:e.data,addPage:this.addPage,currentPages:this.state.pages,previous:this.state.pages.length>1,goPrevious:this.popPage});if("location"===e.type)return s.a.createElement(x,{data:e.data,addPage:this.addPage,currentPages:this.state.pages,previous:this.state.pages.length>1,goPrevious:this.popPage})}}},{key:"renderSearchResults",value:function(){var e=this;return this.state.data_episodes||this.state.data_locations||this.state.data_characters?s.a.createElement("div",{className:"row"},this.state.checkedFilters.get("check-1-episode")?this.state.data_episodes.map((function(t){return s.a.createElement("div",{className:"col-sm-12 div-link search-result",onClick:function(){return e.setState({pages:[t]})}},s.a.createElement(f,{episode:t.data}))})):null,this.state.checkedFilters.get("check-2-character")?this.state.data_characters.map((function(t){return s.a.createElement("div",{className:"col-sm-12 div-link search-result",onClick:function(){return e.setState({pages:[t]})}},s.a.createElement(E,{character:t.data}))})):null,this.state.checkedFilters.get("check-3-location")?this.state.data_locations.map((function(t){return s.a.createElement("div",{className:"col-sm-12 div-link search-result",onClick:function(){return e.setState({pages:[t]})}},s.a.createElement(v,{location:t.data}))})):null):s.a.createElement("div",null,s.a.createElement("p",null,"No results"))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"body-content"},s.a.createElement("img",{id:"rick-image",src:a(25),alt:""}),s.a.createElement("img",{id:"morty-image",src:a(26),alt:""}),s.a.createElement("div",{className:"container header-title"},s.a.createElement("h1",{className:"text-center"},"Rick and Morty Search Engine")),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-sm-6",id:"search-data"},s.a.createElement("div",{id:"search-bar",className:"row"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("input",{className:"form-control",name:"text",type:"text",placeholder:"Search",onChange:function(t){return e.handleOnChange(t)},value:this.state.searchValue})),s.a.createElement("div",{className:"col-sm-12"},s.a.createElement("label",{key:"checkbox1"},"Episode",s.a.createElement("input",{type:"checkbox",name:"check-1-episode",checked:this.state.checkedFilters.get("check-1-episode"),onChange:this.handleFilterChange})),s.a.createElement("label",{key:"checkbox2"},"Character",s.a.createElement("input",{type:"checkbox",name:"check-2-character",checked:this.state.checkedFilters.get("check-1-character"),onChange:this.handleFilterChange})),s.a.createElement("label",{key:"checkbox3"},"Location",s.a.createElement("input",{type:"checkbox",name:"check-3-location",checked:this.state.checkedFilters.get("check-1-location"),onChange:this.handleFilterChange})))),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{id:"search-results"},this.renderSearchResults(),this.state.loadingCharacters|this.state.loadingLocations|this.state.loadingEpisodes?s.a.createElement("div",{className:"col-sm-12 div-link search-result",style:{textAlign:"center"}},s.a.createElement(g.a,{size:80,color:"rgba(38,198,218, 0.56)",loading:this.state.loadingCharacters|this.state.loadingLocations|this.state.loadingEpisodes})):null)),s.a.createElement("div",{className:"container pages"},s.a.createElement("div",{className:"row justify-content-end"},s.a.createElement("div",{className:"col-sm-6"},this.renderDetailPages()))))),s.a.createElement("div",{className:"end-box"}))}}]),n}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.f75c71de.chunk.js.map